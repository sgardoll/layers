# Plan 05-01: Freemium Gates & Subscription Integration

## Goal
Implement freemium model with usage limits and RevenueCat subscription integration.

## Deliverables
1. RevenueCat SDK integration
2. Subscription service with entitlement checking
3. Freemium gate: 3 free projects, then paywall
4. Paywall UI screen
5. Settings screen with subscription status

## Tasks

### Task 1: RevenueCat Setup
- Add `purchases_flutter` package
- Create `lib/services/subscription_service.dart`
- Initialize RevenueCat in main.dart with platform-specific API keys
- Create subscription provider with Riverpod

### Task 2: Entitlement Checking
- Create `SubscriptionState` model (free/premium, project limit)
- Add `checkEntitlement()` method
- Track project count in Supabase user metadata or local storage

### Task 3: Freemium Gate
- Add project count check before creating new project
- Show paywall when limit reached (3 free projects)
- Premium users bypass limit

### Task 4: Paywall Screen
- Create `lib/screens/paywall_screen.dart`
- Display offerings from RevenueCat
- Handle purchase flow
- Show restore purchases option

### Task 5: Settings Integration
- Add subscription status to Settings screen
- Show current plan (Free/Premium)
- Manage subscription button (links to App Store/Play Store)

## Dependencies
- RevenueCat account with configured products
- App Store Connect / Google Play Console product setup

## Notes
- Use `purchases_flutter` package (RevenueCat official)
- Platform keys from environment variables
- Entitlement name: "premium" or "pro"
- Free tier: 3 projects max
- Premium: unlimited projects

## Success Criteria
- [ ] RevenueCat initializes without errors
- [ ] Free users limited to 3 projects
- [ ] Paywall displays offerings correctly
- [ ] Purchase flow completes successfully
- [ ] Subscription status shows in Settings
