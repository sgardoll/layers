# Plan 04-01: PNG and ZIP Export

## Goal
Enable users to export individual layers as PNG files or all layers as a ZIP archive.

## Context
- Layers are stored as remote URLs (from fal.ai inference)
- Need to download, cache locally, then export
- Support share sheet on mobile, file picker on desktop/web

## Tasks

### 1. Export Service
Create `lib/services/export_service.dart`:
- `exportLayerAsPng(Layer layer, String filename)` → downloads and saves single PNG
- `exportAllLayersAsZip(List<Layer> layers, String projectName)` → creates ZIP with all PNGs
- Use `path_provider` for temp/download directories
- Use `archive` package for ZIP creation

### 2. Platform-Specific Export
- **iOS/Android**: Use `share_plus` to invoke share sheet
- **macOS/Windows/Linux**: Use file save dialog (already have path_provider)
- **Web**: Trigger browser download

### 3. Export UI
Add to LayersScreen toolbar:
- Export button (download icon)
- Bottom sheet with options:
  - "Export Selected Layer" (if layer selected)
  - "Export All Layers (ZIP)"
  - "Export All Layers (Individual PNGs)"

### 4. Progress Indicator
- Show progress during download/zip creation
- Handle errors gracefully (network failure, disk full)

## Dependencies
- `archive: ^3.6.0` (ZIP creation)
- `share_plus` (already added)
- `path_provider` (already added)

## Files to Create/Modify
- CREATE: `lib/services/export_service.dart`
- CREATE: `lib/widgets/export_bottom_sheet.dart`
- MODIFY: `lib/screens/layers_screen.dart` (add export button)

## Verification
- [ ] Single PNG export works on iOS/Android/macOS/web
- [ ] ZIP export creates valid archive with all layers
- [ ] Share sheet appears on mobile
- [ ] File saves to Downloads on desktop
- [ ] Progress indicator shows during export
- [ ] Error handling for network/disk failures
