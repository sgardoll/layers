---
phase: 01-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [pubspec.yaml, analysis_options.yaml, lib/main.dart, lib/core/*, lib/models/*]
autonomous: true
---

<objective>
Create Flutter project scaffold with dependencies and core architecture.

Purpose: Establish foundation for Layers app with clean architecture patterns.
Output: Working Flutter project with state management, routing setup, and core models.
</objective>

<execution_context>
@~/.config/opencode/get-shit-done/workflows/execute-plan.md
@~/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Flutter project with dependencies</name>
  <files>pubspec.yaml, analysis_options.yaml, lib/main.dart, lib/core/, lib/models/, lib/services/, lib/providers/, lib/screens/, lib/widgets/</files>
  <action>Run flutter create with org com.layers. Add dependencies: flutter_riverpod, riverpod_annotation, go_router, freezed_annotation, json_annotation, dio, path_provider, share_plus, image_picker, cached_network_image, flutter_animate, collection. Add dev dependencies: riverpod_generator, build_runner, freezed, json_serializable, flutter_lints. Create folder structure. Configure strict analysis options.</action>
  <verify>flutter analyze passes with no errors</verify>
  <done>Project created, dependencies installed, folder structure in place</done>
</task>

<task type="auto">
  <name>Task 2: Create core architecture and models</name>
  <files>lib/core/result.dart, lib/core/api_client.dart, lib/models/layer.dart, lib/models/project.dart</files>
  <action>Create Result type for error handling (Success/Failure). Create ApiClient abstraction using Dio. Create Layer model with freezed: id, name, pngUrl, width, height, bbox, transform (x,y,scale,rotation,opacity), zIndex, visible. Create Project model: id, name, sourceImagePath, layers list, createdAt, updatedAt. Use freezed for immutability and JSON serialization.</action>
  <verify>flutter analyze passes, dart run build_runner build completes</verify>
  <done>Core types and models defined, code generation works</done>
</task>

</tasks>

<verification>
- [ ] flutter analyze passes
- [ ] dart run build_runner build --delete-conflicting-outputs completes
- [ ] Models generate .freezed.dart and .g.dart files
</verification>

<success_criteria>
- All tasks completed
- Flutter project builds without errors
- Core architecture patterns established
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-01-SUMMARY.md`
</output>
