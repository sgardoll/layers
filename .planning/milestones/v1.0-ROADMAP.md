# Milestone v1.0: MVP

**Status:** SHIPPED 2026-01-25
**Phases:** 1-12 (+ 2.1 inserted)
**Total Plans:** 23

## Overview

Build a Flutter app that transforms images into editable layer stacks via AI inference. Start with foundation and architecture, integrate cloud GPU backend for Qwen model, build the signature 3D viewer experience, add export/persistence, then ship with freemium monetization across all platforms.

## Phases

### Phase 1: Foundation
**Goal**: Flutter project with clean architecture, navigation, and platform configs ready
**Depends on**: Nothing (first phase)
**Plans**: 2 plans

- [x] 01-01: Project scaffold and architecture setup
- [x] 01-02: Navigation structure and core UI shell

### Phase 2: Backend & API
**Goal**: Working inference pipeline â€” image in, layers out via cloud GPU
**Depends on**: Phase 1
**Plans**: 2 plans

- [x] 02-01: Backend service setup and API design
- [x] 02-02: Qwen model integration and job processing

### Phase 2.1: Supabase + BuildShip Backend (INSERTED)
**Goal**: Replace custom Dart backend with Supabase tables/triggers + BuildShip workflows
**Depends on**: Phase 2 (replaces it)
**Plans**: 3 plans

- [x] 02.1-01: Supabase schema (projects, project_layers, exports tables)
- [x] 02.1-02: BuildShip workflows (layering job, cleanup, export builder)
- [x] 02.1-03: Flutter Supabase client integration (replace LayerService)

**Architecture:**
- `projects` table: INSERT triggers layering job in BuildShip
- `project_layers` table: stores layer metadata (paths to Storage)
- `exports` table: INSERT triggers export build in BuildShip
- Flutter app: DB writes + realtime subscriptions (no REST API)

### Phase 3: Core Experience
**Goal**: The signature 3D viewer and layer management that makes the app special
**Depends on**: Phase 2
**Plans**: 3 plans

- [x] 03-01: 3D Layer Space View with transforms and camera controls
- [x] 03-02: Layer selection, actions, and reordering
- [x] 03-03: 2D Stack View (utility fallback)

### Phase 4: Export & Persistence
**Goal**: Users can export layers and save/load projects
**Depends on**: Phase 3
**Plans**: 3 plans

- [x] 04-01: PNG and ZIP export
- [x] 04-02: .layers pack format and export
- [x] 04-03: Project save/load

### Phase 5: Monetization & Launch
**Goal**: Freemium model working, app deployed to all platforms
**Depends on**: Phase 4
**Plans**: 3 plans

- [x] 05-01: Freemium gates and subscription integration
- [x] 05-02: Platform builds and deployment
- [x] 05-03: Launch polish and App Store submission

### Phase 6: Email Auth & RevenueCat
**Goal**: Implement email authentication tied to RevenueCat, remove anonymous login, trigger login on first action
**Depends on**: Phase 5
**Plans**: 1 plan

- [x] 06-01: Email auth implementation

**Details:**
- Replace anonymous Supabase auth with email-based auth
- Link Supabase user ID to RevenueCat customer ID
- Only show login screen when user takes first action (New Project)
- Preserve subscription state across devices via RevenueCat user linking

### Phase 7: BuildShip Backend JSON
**Goal**: Provide the full BuildShip back-end JSON for the nodes in the 3 workflows
**Depends on**: Phase 6
**Plans**: 1 plan

- [x] 07-01: Export and document BuildShip workflow JSON

### Phase 8: Bug Fixes & Refinement
**Goal**: Bug fixes and polish based on testing feedback
**Depends on**: Phase 7
**Plans**: 1 plan

- [x] 08-01: UAT bug fixes (project creation, thumbnails, settings, sign out)

### Phase 9: BuildShip Workflow Spec
**Goal**: Build a full specification for the 3 BuildShip workflows so I can create them manually
**Depends on**: Phase 8
**Plans**: 1 plan

- [x] 09-01: Full workflow specification document

### Phase 10: Account Delete Cleanup
**Goal**: On account delete, remove all user's projects and storage files
**Depends on**: Phase 9
**Plans**: 1 plan

- [x] 10-01: Delete user data before account deletion

### Phase 11: App Icon Theme
**Goal**: Create a theme that relates to the colours used in the app icon
**Depends on**: Phase 10
**Plans**: 1 plan

- [x] 11-01: Theme colors matching app icon (#1C39EC deep blue, #00A9FE cyan)

### Phase 12: macOS App Store
**Goal**: Prepare macOS version for App Store deployment
**Depends on**: Phase 11
**Plans**: 1 plan

- [x] 12-01: macOS bundle ID, entitlements, app icon, category

---

## Milestone Summary

**Decimal Phases:**
- Phase 2.1: Supabase + BuildShip Backend (inserted after Phase 2 to replace custom Dart backend)

**Key Decisions:**
- Decision: Flutter for all platforms (Rationale: Single codebase for iOS/Android/macOS/web)
- Decision: "Fake 3D" over real 3D engine (Rationale: Ship faster, avoid plugin complexity)
- Decision: Supabase + BuildShip over custom backend (Rationale: Serverless, realtime subscriptions, no server management)
- Decision: RevenueCat for subscriptions (Rationale: Cross-platform, handles receipt validation)
- Decision: fal.ai BiRefNet for layer extraction (Rationale: Production-ready API, no GPU infrastructure needed)

**Issues Resolved:**
- Fixed project creation using wrong ID (userId instead of timestamp)
- Added signed URL provider for thumbnails while queued
- Fixed sign out to clear project list properly
- Added Photos Library entitlement for macOS
- Added LSApplicationCategoryType for App Store

**Technical Debt Incurred:**
- BuildShip workflows have triggers configured but processing nodes need manual setup using SPEC.md
- Old `backend/` folder still exists (deprecated Dart Shelf backend)

---

*For current project status, see .planning/ROADMAP.md*
